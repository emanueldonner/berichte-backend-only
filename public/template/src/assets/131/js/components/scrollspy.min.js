import{throttle as e,isDesktop as t}from"./utils.min.js";const n=(n,o,i,s)=>{const r=e=>{const t=e.querySelectorAll('a[href^="#"]');if(!t.length)throw new Error("Keine Links in Navigation gefunden!?");const n=[];for(let e=0;e<t.length;e++){const o=t[e].href.split("#")[1];n.push([o,document.getElementById(o).offsetTop])}return{pageHeight:document.body.offsetHeight,windowHeight:window.innerHeight,sections:n}};let c=null;return{init:(()=>{const f=document.querySelector("[data-wm-scrollspy]");if(!f)return;let l=[],d=0,u=document.body.offsetHeight,h=window.innerHeight;if(2!==n.offset.length)throw new Error("Bitte offset für Screens unter und über 1024px angeben.");let g=n.offset[0];const w=e=>{g=e.matches?n.offset[1]:n.offset[0]};var a;t.addListener(w),w(t),window.addEventListener("load",(function(){const e=r(f);u=e.pageHeight,h=e.windowHeight,l=e.sections})),window.onresize=e((function(){const e=r(f);u=e.pageHeight,h=e.windowHeight,l=e.sections})),window.onscroll=e((function(){d=window.scrollY||window.pageYOffset||document.body.scrollTop+(document.documentElement&&document.documentElement.scrollTop||0),u=document.body.offsetHeight;let e="";if(l.length>0){e=l[0][0];for(let t=0;t<l.length;t++){const n=l[t];n[1]-g<=d&&(e=n[0],o({nav:f,hash:n[0]})),u<=h+d&&c&&c.getAttribute("href").substring(1)===n[0]&&(o({nav:f,hash:n[0]}),c=null)}d<l[0][1]-g&&i({nav:f})}window.clearTimeout(a),a=setTimeout((function(){s({nav:f,hash:e})}),150)}))}).bind(n,o,i),setTarget:e=>{c=e}}};export{n as newScrollSpy};