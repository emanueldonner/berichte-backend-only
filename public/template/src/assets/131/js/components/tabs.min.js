const e=()=>{const e=document.querySelectorAll(".js-wm-tabs");if(0!==e.length)for(let s=0;s<e.length;s++){const l=e[s],i=b(l);t(l,i),r(l,i),n(l),l.classList.add("wm-tabs--active")}},t=(e,t)=>{const r=e.querySelector(".js-wm-tabs-list");if(!r)throw new Error('Es gibt keine Liste mit Tabs oder die Klasse "js-wm-tabs-list" fehlt.');const l=r.querySelectorAll(".js-wm-tabs-item"),n=r.querySelectorAll(".js-wm-tabs-tab");if(!l.length)throw new Error('Die Anzahl der ".js-wm-tabs-item" Elemente darf nicht 0 sein.');if(!n.length)throw new Error('Die Anzahl der ".js-wm-tabs-tab" Elemente darf nicht 0 sein.');r.setAttribute("role","tablist");for(let e=0;e<l.length;e++){const r=l[e],i=n[e];r.setAttribute("role","presentation");s(i,e===t)}},r=(e,t)=>{const r=e.querySelectorAll(".js-wm-tabs-panel");if(!r.length)throw new Error('Es gibt keine Tab Panels oder die Klasse "js-wm-tabs-panel" fehlt.');for(let e=0;e<r.length;e++){const s=r[e];if(s.setAttribute("role","tabpanel"),!s.id)throw new Error("id Attribut in Tab Panel darf nicht fehlen oder leer sein.");s.setAttribute("aria-labelledby",`tab_${s.id}`);l(s,e===t)}},s=(e,t)=>{const r=t?0:-1,s=e.getAttribute("href").substr(1);e.setAttribute("role","tab"),e.setAttribute("aria-controls",s),e.setAttribute("tabindex",r),e.setAttribute("aria-selected",t),e.classList.remove("wm-tabs__tab--active"),t&&e.classList.add("wm-tabs__tab--active")},l=(e,t)=>{t?(e.classList.add("wm-tabs__panel--visible"),e.classList.remove("wm-tabs__panel--hidden")):(e.classList.remove("wm-tabs__panel--visible"),e.classList.add("wm-tabs__panel--hidden"))},n=e=>{e.addEventListener("click",o.bind(null,e)),e.querySelector(".js-wm-tabs-list").addEventListener("keydown",i.bind(null,e))},i=(e,t)=>{switch(t.code||t.key||t.keyCode){case"ArrowRight":case"ArrowDown":case 39:a(e,t,"right");break;case"ArrowLeft":case 37:a(e,t,"left")}},a=(e,t,r)=>{const s=e.querySelector(".wm-tabs__tab--active").parentNode,l=e.querySelectorAll(".wm-tabs__item");let n;"right"===r?(n=l[0],null!==s.nextElementSibling&&(n=s.nextElementSibling)):(n=l[l.length-1],null!==s.previousElementSibling&&(n=s.previousElementSibling));const i=n.querySelector(".js-wm-tabs-tab");o(e,t,i),i.focus()},o=(e,t,r=null)=>{const n=r||t.target;if("tab"===n.getAttribute("role")){t.preventDefault();const r=n.getAttribute("href"),i=e.querySelectorAll(".js-wm-tabs-tab"),a=e.querySelectorAll(".js-wm-tabs-panel");if(0!==r.indexOf("#"))throw new Error(`Ankerlink in "${n.textContent.trim()}" fehlt.`);history.pushState({},"",r);for(let t=0;t<i.length;t++){const n=i[t],o=t===b(e,r);s(n,o),l(a[t],o)}return!1}},b=(e,t=location.hash)=>{let r=0;const s=e.querySelector(`[href="${t}"]`);if(s){const e=s.parentNode;r=[...e.parentElement.children].indexOf(e)}return r};export{e as initTabs};