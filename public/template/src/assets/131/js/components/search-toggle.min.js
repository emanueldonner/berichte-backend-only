let e,t,a=!1;const s=(s=!1)=>{if(!document.querySelector(".js-wm-site-search"))return;e=document.querySelector(".js-wm-site-search");const c=e.querySelector("[data-wm-site-search-toggle]");var o=document.querySelectorAll("[data-wm-site-search-open]");if(e.classList.contains("wm-site-search--static")&&(a=!0),!c&&!a)throw new Error('Suchbutton mit Attribut "[data-wm-site-search-toggle]" fehlt.');if(a||(t=document.createElement("button"),t.type="button",t.innerHTML=c.innerHTML,t.classList=c.classList,c.parentNode.replaceChild(t,c),t.setAttribute("aria-expanded",!1),t.addEventListener("click",r)),o.length)for(let e=0;e<o.length;e++){o[e].addEventListener("click",i)}document.addEventListener("click",(function(e){null!==e.target.closest(".js-wm-search-container")||e.target.hasAttribute("data-wm-site-search-open")||n()})),s&&e.addEventListener("keydown",(function(e){27===e.keyCode&&n()}))},n=()=>{a||e.classList.contains("wm-site-search--active")&&(e.classList.remove("wm-site-search--active"),e.classList.remove("wm-site-header__search--active"),t.setAttribute("aria-expanded",!1),document.querySelector(".js-wm-nav-main-actions")&&(document.querySelector(".js-wm-nav-main-actions").classList.remove("wm-nav-main__actions--full"),e.classList.remove("wm-nav-main__search--visible")),document.querySelector("[data-wm-nav-main]")&&document.querySelector("[data-wm-nav-main]").classList.remove("wm-nav-main--hidden"),t.focus())},i=a=>{if(a&&a.preventDefault(),t.setAttribute("aria-expanded",!0),e.classList.add("wm-site-search--active"),e.classList.add("wm-site-header__search--active"),document.querySelector(".js-wm-nav-main-actions")&&(document.querySelector(".js-wm-nav-main-actions").classList.add("wm-nav-main__actions--full"),e.classList.add("wm-nav-main__search--visible")),document.querySelector("[data-wm-nav-main]")&&document.querySelector("[data-wm-nav-main]").classList.add("wm-nav-main--hidden"),!e.querySelector("input"))throw new Error('Eingabefeld (<input type="text" />) fehlt.');e.querySelector("input").focus()},r=e=>{e&&e.preventDefault();"true"===t.getAttribute("aria-expanded")?n():i()};export{n as closeSearch,s as siteSearchToggle,r as toggleSearch};