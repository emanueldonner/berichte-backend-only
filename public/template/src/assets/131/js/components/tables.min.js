const e={de:{ascending:"aufsteigend sortiert",descending:"absteigend sortiert"},en:{ascending:"sorted ascending",descending:"sorted descending"}},t=()=>{const e=document.querySelectorAll(".js-wm-table-responsive");if(0!==e.length)for(let t=0;t<e.length;t++){const r=e[t],n=r.querySelectorAll("tr"),o=r.querySelectorAll("td"),l=r.querySelectorAll("th");for(let e=0;e<n.length;e++)n[e].setAttribute("role","row");for(let e=0;e<o.length;e++)o[e].setAttribute("role","cell");for(let e=0;e<l.length;e++)l[e].setAttribute("role","columnheader")}};t();const r=()=>{const e=document.querySelectorAll("[data-wm-table-sort]");if(0!==e.length)for(let t=0;t<e.length;t++){const r=e[t],o=r.querySelector("thead");if(!o)throw new Error("Kein thead in Tabelle gefunden.");const l=o.querySelectorAll("th");if(!l.length)throw new Error("Keine <th> Elemente im thead gefunden.");const a=0;for(let e=0;e<l.length;e++){const t=l[e];if(!t.hasAttribute("data-no-sort")){s(t,a);t.addEventListener("click",n.bind(null,r))}}}},n=(e,t)=>{let r=t.target;"TH"===r.nodeName&&(r=t.target.querySelector("button"));const n="0"===r.dataset.sort?1:0;o(r,n);var s=r.parentNode;const a=[...s.parentNode.children].indexOf(s),d=e.querySelector("tbody");if(!d)throw new Error("Kein tbody in Tabelle gefunden.");const i=d.querySelectorAll("tr");if(!i.length)throw new Error("Keine <tr> Elemente im tbody gefunden.");const c=[];for(let e=0;e<i.length;e++){const t=i[e],r=t.querySelectorAll("td");if(!r.length)throw new Error("Keine <td> Elemente im tbody gefunden.");c.push([r[a].innerText,t.cloneNode(!0)])}c.sort((function(e,t){var r=e[0].toUpperCase(),o=t[0].toUpperCase();return r<o?n?-1:1:r>o?n?1:-1:0}));for(let e=0;e<i.length;e++){const t=i[e];t.parentNode.replaceChild(c[e][1],t)}const u=n?"ascending":"descending";e.querySelector("[aria-sort]")&&e.querySelector("[aria-sort]").removeAttribute("aria-sort"),s.setAttribute("aria-sort",u),l(e,u,r.dataset.title)},o=(e,t)=>{e.innerHTML=`<span class="wm-h-vh">Sortieren nach ${e.dataset.title} ${(e=>{let t="aufsteigend";return e&&(t="absteigend"),t})(t)}</span>`,e.setAttribute("data-sort",t)},l=(t,r,n)=>{t.querySelector("[ aria-live]").textContent=`${n} ${e[t.dataset.wmTableSort][r]}`},s=(e,t)=>{const r=document.createElement("button");return r.classList.add("wm-btn--clean"),r.classList.add("wm-table__button"),r.setAttribute("data-title",e.textContent),e.appendChild(r),o(r,t),r};export{t as initTables,r as initSortableTables};