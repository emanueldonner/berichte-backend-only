import{isMedium as t,toggle_show as e,toggle_hide as n}from"./utils.min.js";const s=function(e){if(e&&(!e.id||"tog"===e.id))throw new Error('Der Wert für id darf nicht "tog" oder leer sein.');this.config=Object.assign({class:".js-wm-toggle",button_class:".js-wm-toggle-button",panel_class:".js-wm-toggle-panel",id:"tog"},e),this.toggles=document.querySelectorAll(this.config.class);const n=this;t.addListener((function(t){const e=document.querySelectorAll(`${n.config.class}[data-mobile-only]`);if(t.matches)for(let t=0;t<e.length;t++){const s=e[t];n.destroyToggle(s)}else for(let t=0;t<e.length;t++){const s=e[t];n.createToggle(s)}}))};s.prototype.init=function(e=null){const n=e??this.toggles;if(0!==n.length)for(let e=0;e<n.length;e++){const s=n[e];s.dataset.index||(s.dataset.index=e,s.addEventListener("click",this.togglePanel.bind(this)),s.dataset.mobileOnly&&t.matches||this.createToggle(s))}},s.prototype.createToggle=function(t){const e=t.dataset.index,n=`${this.config.id}_${e}`;if(this.headers=t.querySelectorAll(this.config.button_class),this.panels=t.querySelectorAll(this.config.panel_class),this.headers.length!==this.panels.length)throw new Error(`Die Anzahl der Header (${this.headers.length}) und Panel (${this.panels.length}) stimmt nicht überein.`);if(!this.headers.length)throw new Error(`Keine Header mit der Klasse ${this.config.button_class} gefunden.`);for(let t=0;t<this.headers.length;t++)this.header=this.headers[t],this.panel=this.panels[t],this.panelId=`${n}_p_${t}`,this.createHeaderButton(t),this.setupPanel(t)},s.prototype.destroyToggle=function(t){const e=t.querySelectorAll(".wm-toggle__container"),n=t.querySelectorAll(".js-wm-toggle-panel");for(let t=0;t<e.length;t++){const s=e[t],o=n[t],i=s.querySelector(".wm-toggle__button");s.innerHTML=i.innerHTML,s.classList.remove("wm-toggle__button--open"),o.classList.remove("wm-h-toggle-on-off--is-visible"),o.removeAttribute("style"),o.removeAttribute("aria-labelledby"),o.removeAttribute("role")}t.removeAttribute("data-toggle-ready")},s.prototype.createHeaderButton=function(t){const e=document.createElement("button"),n=this.header.innerHTML;e.setAttribute("aria-expanded","false"),e.setAttribute("aria-controls",this.panelId),e.innerHTML=n,e.classList.add("wm-btn--clean"),e.classList.add("wm-toggle__button"),this.header.innerHTML="",this.header.appendChild(e)},s.prototype.togglePanel=function(t){const s=t.target.closest("button");if(s&&s.matches(".wm-toggle__button")){t.preventDefault();const o=s.parentNode,i=s.getAttribute("aria-controls"),l=document.getElementById(i);"true"===s.getAttribute("aria-expanded")?(s.setAttribute("aria-expanded",!1),n(l,(()=>{o.classList.remove("wm-toggle__button--open"),l.style.removeProperty("height")}))):o.classList.contains("wm-toggle__button--open")||(o.classList.add("wm-toggle__button--open"),s.setAttribute("aria-expanded",!0),e(l))}},s.prototype.setupPanel=function(t){if(void 0===this.panel)throw new Error("Panel "+this.panelId+" existiert nicht.");this.panel.id=this.panelId},s.prototype.wrapToggle=function(t,e){const n=document.createElement("div");n.classList.add("wm-toggle","js-wm-toggle");const s=document.createElement("div");s.classList.add("wm-toggle__container","js-wm-toggle-button");const o=document.createElement("div");o.classList.add("wm-toggle__panel","js-wm-toggle-panel");const i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.classList.add("wm-icon","wm-toggle__icon","wm-toggle__icon--status"),i.setAttribute("hidden","hidden"),i.setAttribute("focusable","false"),i.setAttribute("aria-hidden","true"),i.setAttribute("width","28"),i.setAttribute("height","28");const l=document.createElementNS("http://www.w3.org/2000/svg","use");return l.setAttribute("xlink:href","/assets/131/icons/svg/sprite.symbol.svg#chevron-down"),i.appendChild(l),s.innerHTML=t,s.appendChild(i),o.appendChild(e),n.appendChild(s),n.appendChild(o),n};export{s as wmToggle};