import{preventPinchZoom as t}from"./utils.min.js";import{wmImageZoom as e}from"./image-zoom.min.js";const i=function(t,e=!1,i=!1){this.lazy=e,this.disableZoom=i,this.link=t,this.target=t.getAttribute("href"),this.alt=t.querySelector("img").getAttribute("alt"),this.modal=document.querySelector(".wm-modal"),this.image=new Image};i.prototype.getContent=function(){this.image.classList.add("wm-image--zoom"),this.image.dataset.wmZoomDisable=this.disableZoom,this.modal.addEventListener("touchstart",t),document.querySelector(".wm-modal").classList.add("wm-modal--locked"),this.image.onload=t=>{if(-1===t.target.src.indexOf(";base64")){const a=t.target,s=a.closest(".wm-modal-content__item");if(s.classList.add("wm-modal-content__item--loaded"),this.imageZoom=new e({img:a,container:s,zoomedClass:"wm-image--zoomed"}),this.link.closest("figure")){const t=this.link.closest("figure").querySelector("figcaption");if(t){var i=document.createElement("p");i.classList.add("wm-modal-content__caption"),i.textContent=t.textContent,s.appendChild(i)}}if(!this.modal.querySelector(".wm-modal-content__info")){var o=document.createElement("p");o.textContent=" Zum Vergrößern der gewünschten Stelle doppelt antippen",o.classList.add("wm-modal-content__info"),this.modal.querySelector(".wm-modal-content").appendChild(o)}}document.querySelector(".wm-modal").classList.remove("wm-modal--locked")},this.lazy?(this.image.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",this.image.setAttribute("data-src",this.target)):this.image.src=this.target,this.image.alt=this.alt;const i=document.createElement("div");return i.classList.add("wm-modal-content__item"),i.classList.add("wm-modal-content__item--image"),i.appendChild(this.image),i},i.prototype.close=function(){this.imageZoom.destroyEvents()};export{i as WmShowModalImage};